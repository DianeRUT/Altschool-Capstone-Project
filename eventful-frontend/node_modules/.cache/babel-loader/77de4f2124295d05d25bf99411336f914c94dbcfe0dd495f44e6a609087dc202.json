{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\fsindamb\\\\OneDrive\\\\Desktop\\\\Diane_stuffs\\\\Capstone Altschool Project\\\\eventful-frontend\\\\src\\\\pages\\\\CreatorDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState } from 'react';\nimport { AuthContext } from '../context/AuthContext'; // Import using curly braces\nimport EventCard from '../components/EventCard';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CreatorDashboard = () => {\n  _s();\n  const {\n    authToken\n  } = useContext(AuthContext); // Use the correct variable name from AuthContext\n  const [events, setEvents] = useState([]);\n  useEffect(() => {\n    const fetchUserEvents = async () => {\n      try {\n        const response = await fetch('http://localhost:5000/api/events/my-events', {\n          // Ensure the correct endpoint\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${authToken}`\n          }\n        });\n        if (!response.ok) {\n          throw new Error('Failed to fetch events');\n        }\n        const data = await response.json();\n        setEvents(data);\n      } catch (error) {\n        console.error('Error fetching user events:', error);\n      }\n    };\n    fetchUserEvents();\n  }, [authToken]);\n  const handleDelete = async id => {\n    try {\n      const response = await fetch(`http://localhost:5000/api/events/${id}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${authToken}`\n        }\n      });\n      if (response.ok) {\n        setEvents(prevEvents => prevEvents.filter(event => event._id !== id)); // Remove event from list\n      } else {\n        console.error('Failed to delete event');\n      }\n    } catch (error) {\n      console.error('Error deleting event:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"My Events\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"event-list\",\n      children: events.map(event => /*#__PURE__*/_jsxDEV(EventCard, {\n        event: event,\n        onDelete: handleDelete\n      }, event._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 9\n  }, this);\n};\n_s(CreatorDashboard, \"OHLqd5Z1gjycg29r3rw/X0CVyCs=\");\n_c = CreatorDashboard;\nexport default CreatorDashboard;\nvar _c;\n$RefreshReg$(_c, \"CreatorDashboard\");","map":{"version":3,"names":["React","useContext","useEffect","useState","AuthContext","EventCard","jsxDEV","_jsxDEV","CreatorDashboard","_s","authToken","events","setEvents","fetchUserEvents","response","fetch","headers","ok","Error","data","json","error","console","handleDelete","id","method","prevEvents","filter","event","_id","children","fileName","_jsxFileName","lineNumber","columnNumber","className","map","onDelete","_c","$RefreshReg$"],"sources":["C:/Users/fsindamb/OneDrive/Desktop/Diane_stuffs/Capstone Altschool Project/eventful-frontend/src/pages/CreatorDashboard.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\r\nimport { AuthContext } from '../context/AuthContext'; // Import using curly braces\r\nimport EventCard from '../components/EventCard';\r\n\r\nconst CreatorDashboard = () => {\r\n    const { authToken } = useContext(AuthContext); // Use the correct variable name from AuthContext\r\n    const [events, setEvents] = useState([]);\r\n\r\n    useEffect(() => {\r\n        const fetchUserEvents = async () => {\r\n            try {\r\n                const response = await fetch('http://localhost:5000/api/events/my-events', { // Ensure the correct endpoint\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        'Authorization': `Bearer ${authToken}`,\r\n                    },\r\n                });\r\n\r\n                if (!response.ok) {\r\n                    throw new Error('Failed to fetch events');\r\n                }\r\n\r\n                const data = await response.json();\r\n                setEvents(data);\r\n            } catch (error) {\r\n                console.error('Error fetching user events:', error);\r\n            }\r\n        };\r\n\r\n        fetchUserEvents();\r\n    }, [authToken]);\r\n\r\n    const handleDelete = async (id) => {\r\n        try {\r\n            const response = await fetch(`http://localhost:5000/api/events/${id}`, {\r\n                method: 'DELETE',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `Bearer ${authToken}`,\r\n                },\r\n            });\r\n\r\n            if (response.ok) {\r\n                setEvents(prevEvents => prevEvents.filter(event => event._id !== id)); // Remove event from list\r\n            } else {\r\n                console.error('Failed to delete event');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error deleting event:', error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <h2>My Events</h2>\r\n            <div className=\"event-list\">\r\n                {events.map(event => (\r\n                    <EventCard key={event._id} event={event} onDelete={handleDelete} />\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CreatorDashboard;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC9D,SAASC,WAAW,QAAQ,wBAAwB,CAAC,CAAC;AACtD,OAAOC,SAAS,MAAM,yBAAyB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEhD,MAAMC,gBAAgB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC3B,MAAM;IAAEC;EAAU,CAAC,GAAGT,UAAU,CAACG,WAAW,CAAC,CAAC,CAAC;EAC/C,MAAM,CAACO,MAAM,EAAEC,SAAS,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EAExCD,SAAS,CAAC,MAAM;IACZ,MAAMW,eAAe,GAAG,MAAAA,CAAA,KAAY;MAChC,IAAI;QACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,4CAA4C,EAAE;UAAE;UACzEC,OAAO,EAAE;YACL,cAAc,EAAE,kBAAkB;YAClC,eAAe,EAAE,UAAUN,SAAS;UACxC;QACJ,CAAC,CAAC;QAEF,IAAI,CAACI,QAAQ,CAACG,EAAE,EAAE;UACd,MAAM,IAAIC,KAAK,CAAC,wBAAwB,CAAC;QAC7C;QAEA,MAAMC,IAAI,GAAG,MAAML,QAAQ,CAACM,IAAI,CAAC,CAAC;QAClCR,SAAS,CAACO,IAAI,CAAC;MACnB,CAAC,CAAC,OAAOE,KAAK,EAAE;QACZC,OAAO,CAACD,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;MACvD;IACJ,CAAC;IAEDR,eAAe,CAAC,CAAC;EACrB,CAAC,EAAE,CAACH,SAAS,CAAC,CAAC;EAEf,MAAMa,YAAY,GAAG,MAAOC,EAAE,IAAK;IAC/B,IAAI;MACA,MAAMV,QAAQ,GAAG,MAAMC,KAAK,CAAC,oCAAoCS,EAAE,EAAE,EAAE;QACnEC,MAAM,EAAE,QAAQ;QAChBT,OAAO,EAAE;UACL,cAAc,EAAE,kBAAkB;UAClC,eAAe,EAAE,UAAUN,SAAS;QACxC;MACJ,CAAC,CAAC;MAEF,IAAII,QAAQ,CAACG,EAAE,EAAE;QACbL,SAAS,CAACc,UAAU,IAAIA,UAAU,CAACC,MAAM,CAACC,KAAK,IAAIA,KAAK,CAACC,GAAG,KAAKL,EAAE,CAAC,CAAC,CAAC,CAAC;MAC3E,CAAC,MAAM;QACHF,OAAO,CAACD,KAAK,CAAC,wBAAwB,CAAC;MAC3C;IACJ,CAAC,CAAC,OAAOA,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;IACjD;EACJ,CAAC;EAED,oBACId,OAAA;IAAAuB,QAAA,gBACIvB,OAAA;MAAAuB,QAAA,EAAI;IAAS;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAClB3B,OAAA;MAAK4B,SAAS,EAAC,YAAY;MAAAL,QAAA,EACtBnB,MAAM,CAACyB,GAAG,CAACR,KAAK,iBACbrB,OAAA,CAACF,SAAS;QAAiBuB,KAAK,EAAEA,KAAM;QAACS,QAAQ,EAAEd;MAAa,GAAhDK,KAAK,CAACC,GAAG;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAyC,CACrE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACD,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEd,CAAC;AAACzB,EAAA,CA1DID,gBAAgB;AAAA8B,EAAA,GAAhB9B,gBAAgB;AA4DtB,eAAeA,gBAAgB;AAAC,IAAA8B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}