{"ast":null,"code":"import React,{useContext,useEffect,useState}from'react';import{AuthContext}from'../context/AuthContext';// Import using curly braces\nimport EventCard from'../components/EventCard';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CreatorDashboard=()=>{const{authToken}=useContext(AuthContext);// Use the correct variable name from AuthContext\nconst[events,setEvents]=useState([]);useEffect(()=>{const fetchUserEvents=async()=>{try{const response=await fetch('http://localhost:5000/api/events/my-events',{// Ensure the correct endpoint\nheaders:{'Content-Type':'application/json','Authorization':`Bearer ${authToken}`}});if(!response.ok){throw new Error('Failed to fetch events');}const data=await response.json();setEvents(data);}catch(error){console.error('Error fetching user events:',error);}};fetchUserEvents();},[authToken]);const handleDelete=async id=>{try{const response=await fetch(`http://localhost:5000/api/events/${id}`,{method:'DELETE',headers:{'Content-Type':'application/json','Authorization':`Bearer ${authToken}`}});if(response.ok){setEvents(prevEvents=>prevEvents.filter(event=>event._id!==id));// Remove event from list\n}else{console.error('Failed to delete event');}}catch(error){console.error('Error deleting event:',error);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Events\"}),/*#__PURE__*/_jsx(\"div\",{className:\"event-list\",children:events.map(event=>/*#__PURE__*/_jsx(EventCard,{event:event,onDelete:handleDelete},event._id))})]});};export default CreatorDashboard;","map":{"version":3,"names":["React","useContext","useEffect","useState","AuthContext","EventCard","jsx","_jsx","jsxs","_jsxs","CreatorDashboard","authToken","events","setEvents","fetchUserEvents","response","fetch","headers","ok","Error","data","json","error","console","handleDelete","id","method","prevEvents","filter","event","_id","children","className","map","onDelete"],"sources":["C:/Users/fsindamb/OneDrive/Desktop/Diane_stuffs/Capstone Altschool Project/eventful-frontend/src/pages/CreatorDashboard.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\r\nimport { AuthContext } from '../context/AuthContext'; // Import using curly braces\r\nimport EventCard from '../components/EventCard';\r\n\r\nconst CreatorDashboard = () => {\r\n    const { authToken } = useContext(AuthContext); // Use the correct variable name from AuthContext\r\n    const [events, setEvents] = useState([]);\r\n\r\n    useEffect(() => {\r\n        const fetchUserEvents = async () => {\r\n            try {\r\n                const response = await fetch('http://localhost:5000/api/events/my-events', { // Ensure the correct endpoint\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        'Authorization': `Bearer ${authToken}`,\r\n                    },\r\n                });\r\n\r\n                if (!response.ok) {\r\n                    throw new Error('Failed to fetch events');\r\n                }\r\n\r\n                const data = await response.json();\r\n                setEvents(data);\r\n            } catch (error) {\r\n                console.error('Error fetching user events:', error);\r\n            }\r\n        };\r\n\r\n        fetchUserEvents();\r\n    }, [authToken]);\r\n\r\n    const handleDelete = async (id) => {\r\n        try {\r\n            const response = await fetch(`http://localhost:5000/api/events/${id}`, {\r\n                method: 'DELETE',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `Bearer ${authToken}`,\r\n                },\r\n            });\r\n\r\n            if (response.ok) {\r\n                setEvents(prevEvents => prevEvents.filter(event => event._id !== id)); // Remove event from list\r\n            } else {\r\n                console.error('Failed to delete event');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error deleting event:', error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <h2>My Events</h2>\r\n            <div className=\"event-list\">\r\n                {events.map(event => (\r\n                    <EventCard key={event._id} event={event} onDelete={handleDelete} />\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CreatorDashboard;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC9D,OAASC,WAAW,KAAQ,wBAAwB,CAAE;AACtD,MAAO,CAAAC,SAAS,KAAM,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEhD,KAAM,CAAAC,gBAAgB,CAAGA,CAAA,GAAM,CAC3B,KAAM,CAAEC,SAAU,CAAC,CAAGV,UAAU,CAACG,WAAW,CAAC,CAAE;AAC/C,KAAM,CAACQ,MAAM,CAAEC,SAAS,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CAExCD,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAY,eAAe,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,4CAA4C,CAAE,CAAE;AACzEC,OAAO,CAAE,CACL,cAAc,CAAE,kBAAkB,CAClC,eAAe,CAAE,UAAUN,SAAS,EACxC,CACJ,CAAC,CAAC,CAEF,GAAI,CAACI,QAAQ,CAACG,EAAE,CAAE,CACd,KAAM,IAAI,CAAAC,KAAK,CAAC,wBAAwB,CAAC,CAC7C,CAEA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAL,QAAQ,CAACM,IAAI,CAAC,CAAC,CAClCR,SAAS,CAACO,IAAI,CAAC,CACnB,CAAE,MAAOE,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,6BAA6B,CAAEA,KAAK,CAAC,CACvD,CACJ,CAAC,CAEDR,eAAe,CAAC,CAAC,CACrB,CAAC,CAAE,CAACH,SAAS,CAAC,CAAC,CAEf,KAAM,CAAAa,YAAY,CAAG,KAAO,CAAAC,EAAE,EAAK,CAC/B,GAAI,CACA,KAAM,CAAAV,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,oCAAoCS,EAAE,EAAE,CAAE,CACnEC,MAAM,CAAE,QAAQ,CAChBT,OAAO,CAAE,CACL,cAAc,CAAE,kBAAkB,CAClC,eAAe,CAAE,UAAUN,SAAS,EACxC,CACJ,CAAC,CAAC,CAEF,GAAII,QAAQ,CAACG,EAAE,CAAE,CACbL,SAAS,CAACc,UAAU,EAAIA,UAAU,CAACC,MAAM,CAACC,KAAK,EAAIA,KAAK,CAACC,GAAG,GAAKL,EAAE,CAAC,CAAC,CAAE;AAC3E,CAAC,IAAM,CACHF,OAAO,CAACD,KAAK,CAAC,wBAAwB,CAAC,CAC3C,CACJ,CAAE,MAAOA,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CACjD,CACJ,CAAC,CAED,mBACIb,KAAA,QAAAsB,QAAA,eACIxB,IAAA,OAAAwB,QAAA,CAAI,WAAS,CAAI,CAAC,cAClBxB,IAAA,QAAKyB,SAAS,CAAC,YAAY,CAAAD,QAAA,CACtBnB,MAAM,CAACqB,GAAG,CAACJ,KAAK,eACbtB,IAAA,CAACF,SAAS,EAAiBwB,KAAK,CAAEA,KAAM,CAACK,QAAQ,CAAEV,YAAa,EAAhDK,KAAK,CAACC,GAA4C,CACrE,CAAC,CACD,CAAC,EACL,CAAC,CAEd,CAAC,CAED,cAAe,CAAApB,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}