{"ast":null,"code":"import React,{useState,useEffect,useContext}from'react';import EventCard from'./EventCard';import{AuthContext}from'../context/AuthContext';import{jsx as _jsx}from\"react/jsx-runtime\";const EventList=()=>{const[events,setEvents]=useState([]);const{authToken}=useContext(AuthContext);useEffect(()=>{const fetchEvents=async()=>{try{const response=await fetch('http://localhost:5000/api/events/all');if(!response.ok){throw new Error('Failed to fetch events');}const data=await response.json();setEvents(data);}catch(error){console.error('Error fetching events:',error);}};fetchEvents();},[authToken]);const handleDelete=async id=>{try{const response=await fetch(`http://localhost:5000/api/events/${id}`,{method:'DELETE',headers:{'Content-Type':'application/json','Authorization':`Bearer ${authToken}`// Include the token here\n}});if(!response.ok){throw new Error('Failed to delete event');}// Update the events list after deletion\nsetEvents(events.filter(event=>event._id!==id));}catch(error){console.error('Error deleting event:',error);}};return/*#__PURE__*/_jsx(\"div\",{className:\"event-list\",children:events.map(event=>/*#__PURE__*/_jsx(EventCard,{event:event,onDelete:handleDelete},event._id))});};export default EventList;","map":{"version":3,"names":["React","useState","useEffect","useContext","EventCard","AuthContext","jsx","_jsx","EventList","events","setEvents","authToken","fetchEvents","response","fetch","ok","Error","data","json","error","console","handleDelete","id","method","headers","filter","event","_id","className","children","map","onDelete"],"sources":["C:/Users/fsindamb/OneDrive/Desktop/Diane_stuffs/Capstone Altschool Project/eventful-frontend/src/components/EventList.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport EventCard from './EventCard'; \r\nimport { AuthContext } from '../context/AuthContext';\r\n\r\nconst EventList = () => {\r\n    const [events, setEvents] = useState([]);\r\n    const { authToken } = useContext(AuthContext);\r\n\r\n    useEffect(() => {\r\n        const fetchEvents = async () => {\r\n            try {\r\n                const response = await fetch('http://localhost:5000/api/events/all');\r\n                if (!response.ok) {\r\n                    throw new Error('Failed to fetch events');\r\n                }\r\n                const data = await response.json();\r\n                setEvents(data);\r\n            } catch (error) {\r\n                console.error('Error fetching events:', error);\r\n            }\r\n        };\r\n        fetchEvents();\r\n    }, [authToken]);\r\n\r\n    const handleDelete = async (id) => {\r\n        try {\r\n          const response = await fetch(`http://localhost:5000/api/events/${id}`, {\r\n                method: 'DELETE',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    \r\n                    'Authorization': `Bearer ${authToken}`, // Include the token here\r\n                },\r\n            });\r\n    \r\n            if (!response.ok) {\r\n                throw new Error('Failed to delete event');\r\n            }\r\n            // Update the events list after deletion\r\n            setEvents(events.filter(event => event._id !== id));\r\n        } catch (error) {\r\n            console.error('Error deleting event:', error);\r\n        }\r\n    };\r\n\r\n\r\n    return (\r\n        <div className=\"event-list\">\r\n            {events.map(event => (\r\n                <EventCard key={event._id} event={event} onDelete={handleDelete} />\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default EventList;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,UAAU,KAAQ,OAAO,CAC9D,MAAO,CAAAC,SAAS,KAAM,aAAa,CACnC,OAASC,WAAW,KAAQ,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAErD,KAAM,CAAAC,SAAS,CAAGA,CAAA,GAAM,CACpB,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGT,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAAEU,SAAU,CAAC,CAAGR,UAAU,CAACE,WAAW,CAAC,CAE7CH,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAU,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAI,CACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,sCAAsC,CAAC,CACpE,GAAI,CAACD,QAAQ,CAACE,EAAE,CAAE,CACd,KAAM,IAAI,CAAAC,KAAK,CAAC,wBAAwB,CAAC,CAC7C,CACA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAJ,QAAQ,CAACK,IAAI,CAAC,CAAC,CAClCR,SAAS,CAACO,IAAI,CAAC,CACnB,CAAE,MAAOE,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAClD,CACJ,CAAC,CACDP,WAAW,CAAC,CAAC,CACjB,CAAC,CAAE,CAACD,SAAS,CAAC,CAAC,CAEf,KAAM,CAAAU,YAAY,CAAG,KAAO,CAAAC,EAAE,EAAK,CAC/B,GAAI,CACF,KAAM,CAAAT,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,oCAAoCQ,EAAE,EAAE,CAAE,CACjEC,MAAM,CAAE,QAAQ,CAChBC,OAAO,CAAE,CACL,cAAc,CAAE,kBAAkB,CAElC,eAAe,CAAE,UAAUb,SAAS,EAAI;AAC5C,CACJ,CAAC,CAAC,CAEF,GAAI,CAACE,QAAQ,CAACE,EAAE,CAAE,CACd,KAAM,IAAI,CAAAC,KAAK,CAAC,wBAAwB,CAAC,CAC7C,CACA;AACAN,SAAS,CAACD,MAAM,CAACgB,MAAM,CAACC,KAAK,EAAIA,KAAK,CAACC,GAAG,GAAKL,EAAE,CAAC,CAAC,CACvD,CAAE,MAAOH,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CACjD,CACJ,CAAC,CAGD,mBACIZ,IAAA,QAAKqB,SAAS,CAAC,YAAY,CAAAC,QAAA,CACtBpB,MAAM,CAACqB,GAAG,CAACJ,KAAK,eACbnB,IAAA,CAACH,SAAS,EAAiBsB,KAAK,CAAEA,KAAM,CAACK,QAAQ,CAAEV,YAAa,EAAhDK,KAAK,CAACC,GAA4C,CACrE,CAAC,CACD,CAAC,CAEd,CAAC,CAED,cAAe,CAAAnB,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}